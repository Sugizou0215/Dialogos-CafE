<div class="container">
  <div class ="row">
    <h2 class="col-10">
      グループ詳細
    </h2>
    <table class="col-10 table table-striped table-condensed">
      <tr>
        <td>
          <%= attachment_image_tag(@group, :group_image, :fill, 50, 50, fallback: "no-image-icon.jpg", size: "100x100", class:"rounded-circle" ) %>
        </td>
        <td></td>
      </tr>
      <tr>
        <td>グループ名</td>
        <td><%= @group.name %></td>
      </tr>
      <tr>
        <td>グループ概要</td>
        <td><%= @group.introduction %></td>
      </tr>
      <tr>
        <td>グループ主催者</td>
        <td><%= link_to @admin_user.name, user_path(@admin_user) %></td>
      </tr>
      <% if @admin_user == current_user %>
        <tr>
          <td>グループメンバー</td>
          <td>
            <% @group.users.each do |member| %>
              <li><%= link_to member.name, user_path(member) %><br></li>
            <% end %>
          </td>
        </tr>
       <% end %>
    </table>
    <% if @admin_user == current_user %>
      <%= link_to '編集する', edit_group_path, class: 'btn btn-info' %>
      <%= link_to "承認待ち一覧", group_applies_path(@group), class:"btn btn-primary" %>
    <% else %>
      <!-- ログインユーザが当該コミュニティに所属している場合 -->
      <% if @group.users.include?(current_user) %>
        <%= link_to '退会する', group_leave_path(@group), method: :delete, data:{ confirm: "「#{@group.name}」から退会します。よろしいですか？" } ,class:"btn btn-danger" %>
      <!-- 当該コミュニティには所属していないが、ログインはしている場合 -->
      <% elsif current_user %>
         <% if @apply %>
          <%= link_to '申請取消', group_apply_path(@group, apply_id: @apply.id), method: :delete, class: "btn btn-danger" %>
        <% else %>
          <%= link_to '加入申請', group_applies_path(@group), method: :post, class: "btn btn-success" %>
        <% end %>
      <% end %>
    <% end %>
  </div>
</div>